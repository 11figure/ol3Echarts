{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 76b1bdddb200b51e95c6","webpack:///external \"echarts\"","webpack:///./src/index.js","webpack:///./src/registerMap/registerMap.js","webpack:///./src/registerMap/registerMapCoordSys.js","webpack:///./src/registerMap/registerMapModel.js","webpack:///./src/registerMap/registerMapView.js","webpack:///./src/layer/echartsLayer.js"],"names":["require","ol3Echarts","module","exports","registerCoordinateSystem","registerAction","type","event","update","payload","ecModel","version","echarts","CoordSys","mapInstance","api","Map","dimensions","_mapOffset","_api","prototype","setMapOffset","mapOffset","getBMap","setMap","map","ol","Error","dataToPoint","coords","Array","isArray","length","item","Number","getPixelFromCoordinate","proj","fromLonLat","pointToData","pixel","getCoordinateFromPixel","getViewRect","graphic","BoundingRect","getWidth","getHeight","getRoamTransform","matrix","create","echartModel","_coordSys","eachComponent","MapModel","_HMap","coordinateSystem","eachSeries","seriesModel","get","extendComponentModel","defaultOption","roam","extendComponentView","render","rendering","viewportRoot","getZr","painter","getViewportRoot","coordSys","moveHandler","target","offsetEl","parentNode","parseInt","style","left","top","dispatchAction","zoomEndHandler","_oldMoveHandler","_oldZoomEndHandler","getView","on","container","size","getSize","div","document","createElement","position","height","width","indexOf","_container","getElementsByClassName","window","appendChild","_con","getElementById","getViewport","_echartsContainer","chart","init","resize","str","root","_root","$","querySelector","bind","remove","removeChild","undefined","that","resizeEvt","doc","addEventListener","setTimeout","e","persisted","readyState"],"mappings":"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","file":"ol3Echarts.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"echarts\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ol3Echarts\", [\"echarts\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ol3Echarts\"] = factory(require(\"echarts\"));\n\telse\n\t\troot[\"ol3Echarts\"] = factory(root[\"echarts\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 76b1bdddb200b51e95c6","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"echarts\"\n// module id = 0\n// module chunks = 0","require('./registerMap/registerMap.js')\r\nvar ol3Echarts = require('./layer/echartsLayer.js')\r\nmodule.exports = ol3Echarts\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","/**\r\n * Created by FDD on 2017/5/30.\r\n * @desc 注册当前地图的坐标系统,事件，模块和视图\r\n */\r\ndefine(function (require) {\r\n  require('echarts').registerCoordinateSystem(\r\n    'HMap', require('./registerMapCoordSys')\r\n  )\r\n  require('./registerMapModel')\r\n  require('./registerMapView')\r\n  require('echarts').registerAction({\r\n    type: 'MapRoam',\r\n    event: 'MapRoam',\r\n    update: 'updateLayout'\r\n  }, function (payload, ecModel) {})\r\n  return {\r\n    version: '1.2.0'\r\n  }\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/registerMap/registerMap.js","/**\r\n * Created by FDD on 2017/5/30.\r\n * @desc 坐标系统\r\n */\r\ndefine(function (require) {\r\n  var echarts = require('echarts')\r\n  var CoordSys = function (mapInstance, api) {\r\n    this.Map = mapInstance\r\n    this.dimensions = ['lng', 'lat']\r\n    this._mapOffset = [0, 0]\r\n    this._api = api\r\n  }\r\n\r\n  CoordSys.prototype.dimensions = ['lng', 'lat']\r\n\r\n  /**\r\n   * 设置地图窗口的偏移\r\n   * @param mapOffset\r\n   */\r\n  CoordSys.prototype.setMapOffset = function (mapOffset) {\r\n    this._mapOffset = mapOffset\r\n  }\r\n\r\n  /**\r\n   * 获取地图对象\r\n   * @returns {*|ol.Map}\r\n   */\r\n  CoordSys.prototype.getBMap = function () {\r\n    return this.Map\r\n  }\r\n\r\n  /**\r\n   * 设置当前地图\r\n   * @param map\r\n   */\r\n  CoordSys.prototype.setMap = function (map) {\r\n    if (map && map instanceof ol.Map) {\r\n      this.Map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 跟据坐标转换成屏幕像素\r\n   * @param coords\r\n   * @returns {ol.Pixel}\r\n   */\r\n  CoordSys.prototype.dataToPoint = function (coords) {\r\n    if (coords && Array.isArray(coords) && coords.length > 0) {\r\n      coords = coords.map(function (item) {\r\n        if (typeof item === 'string') {\r\n          item = Number(item)\r\n        }\r\n        return item\r\n      })\r\n    }\r\n    return this.Map.getPixelFromCoordinate(ol.proj.fromLonLat(coords))\r\n  }\r\n\r\n  /**\r\n   * 跟据屏幕像素转换成坐标\r\n   * @param pixel\r\n   * @returns {ol.Coordinate}\r\n   */\r\n  CoordSys.prototype.pointToData = function (pixel) {\r\n    return this.Map.getCoordinateFromPixel(pixel)\r\n  }\r\n\r\n  /**\r\n   * 获取视图矩形范围\r\n   * @returns {*}\r\n   */\r\n  CoordSys.prototype.getViewRect = function () {\r\n    var api = this._api\r\n    return new echarts.graphic.BoundingRect(0, 0, api.getWidth(), api.getHeight())\r\n  }\r\n\r\n  /**\r\n   * 移动转换\r\n   */\r\n  CoordSys.prototype.getRoamTransform = function () {\r\n    return echarts.matrix.create()\r\n  }\r\n\r\n  CoordSys.dimensions = CoordSys.prototype.dimensions\r\n\r\n  /**\r\n   * 注册实例\r\n   * @param echartModel\r\n   * @param api\r\n   */\r\n  CoordSys.create = function (echartModel, api) {\r\n    var _coordSys = null\r\n    echartModel.eachComponent('HMap', function (MapModel) {\r\n      var _HMap = echarts.Map\r\n      _coordSys = new CoordSys(_HMap, api)\r\n      _coordSys.setMapOffset(MapModel.mapOffset || [0, 0])\r\n      MapModel.coordinateSystem = _coordSys\r\n    })\r\n\r\n    echartModel.eachSeries(function (seriesModel) {\r\n      if (seriesModel.get('coordinateSystem') === 'HMap') {\r\n        seriesModel.coordinateSystem = _coordSys\r\n      }\r\n    })\r\n  }\r\n\r\n  return CoordSys\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/registerMap/registerMapCoordSys.js","define(function (require) {\r\n  return require('echarts').extendComponentModel({\r\n    type: 'HMap',\r\n    getBMap: function () {\r\n      return this.Map\r\n    },\r\n    defaultOption: {\r\n      roam: false\r\n    }\r\n  })\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/registerMap/registerMapModel.js","define(function (require) {\r\n  var echarts = require('echarts')\r\n  return echarts.extendComponentView({\r\n    type: 'HMap',\r\n    render: function (MapModel, echartModel, api) {\r\n      var rendering = true\r\n      var Map = echarts.Map\r\n      var viewportRoot = api.getZr().painter.getViewportRoot()\r\n      var coordSys = MapModel.coordinateSystem\r\n      var moveHandler = function (type, target) {\r\n        if (rendering) {\r\n          return\r\n        }\r\n        var offsetEl = viewportRoot.parentNode.parentNode.parentNode\r\n        var mapOffset = [\r\n          -parseInt(offsetEl.style.left, 10) || 0,\r\n          -parseInt(offsetEl.style.top, 10) || 0\r\n        ]\r\n        viewportRoot.style.left = mapOffset[0] + 'px'\r\n        viewportRoot.style.top = mapOffset[1] + 'px'\r\n        coordSys.setMapOffset(mapOffset)\r\n        MapModel.mapOffset = mapOffset\r\n        api.dispatchAction({\r\n          type: 'MapRoam'\r\n        })\r\n      }\r\n      var zoomEndHandler = function () {\r\n        if (rendering) {\r\n          return\r\n        }\r\n        api.dispatchAction({\r\n          type: 'MapRoam'\r\n        })\r\n      }\r\n      this._oldMoveHandler = moveHandler\r\n      this._oldZoomEndHandler = zoomEndHandler\r\n      Map.getView().on('change:resolution', moveHandler)\r\n      Map.getView().on('change:center', moveHandler)\r\n      Map.getView().on('change:rotation', moveHandler)\r\n      Map.on('moveend', moveHandler)\r\n      var roam = MapModel.get('roam')\r\n      if (roam && roam !== 'scale') {\r\n        // todo 允许拖拽\r\n      } else {\r\n        // todo 不允许拖拽\r\n      }\r\n      if (roam && roam !== 'move') {\r\n        // todo 允许移动\r\n      } else {\r\n        // todo 不允许允许移动\r\n      }\r\n      rendering = false\r\n    }\r\n  })\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/registerMap/registerMapView.js","var echarts = require('echarts')\n/**\n * 创建独立对象\n * @param map\n */\nvar ol3Echarts = function (map, container) {\n  this.map = map\n  var size = this.map.getSize()\n  var div = document.createElement('div')\n  div.style.position = 'absolute'\n  div.style.height = size[1] + 'px'\n  div.style.width = size[0] + 'px'\n  div.style.top = 0\n  div.style.left = 0\n  if (container && container.indexOf('.') === 0) {\n    var _container = this.getElementsByClassName(container, window)\n    _container.appendChild(div)\n  } else if (container && container.indexOf('#') === 0) {\n    var _con = (typeof container === 'string' ? document.getElementById(container) : container)\n    _con.appendChild(div)\n  } else {\n    this.map.getViewport().appendChild(div)\n  }\n  this._echartsContainer = div\n  this.chart = echarts.init(div)\n  if (!echarts) {\n    throw new Error('请先引入echarts3！')\n  }\n  echarts.Map = map\n  this.resize()\n}\n\n/**\n * 通过类名获取元素\n * @param str\n * @param root\n * @returns {HTMLElement}\n */\nol3Echarts.prototype.getElementsByClassName = function (str, root) {\n  var _root = root || window\n  var $ = _root.document.querySelector.bind(_root.document)\n  var target = $(str)\n  return target\n}\n\n/**\n * 移除echarts\n */\nol3Echarts.prototype.remove = function () {\n  this._echartsContainer.parentNode.removeChild(this._echartsContainer)\n  this.map = undefined\n  echarts.Map = undefined\n}\n/**\n * 响应地图尺寸变化\n */\nol3Echarts.prototype.resize = function () {\n  var that = this\n  var size = this.map.getSize()\n  that._echartsContainer.style.width = size[0] + 'px'\n  that._echartsContainer.style.height = size[1] + 'px'\n  var resizeEvt = (('orientationchange' in window) ? 'orientationchange' : 'resize')\n  var doc = window.document\n  window.addEventListener(resizeEvt, function () {\n    setTimeout(function () {\n      that.chart.resize()\n    }, 50)\n  }, false)\n  window.addEventListener('pageshow', function (e) {\n    if (e.persisted) {\n      setTimeout(function () {\n        that.chart.resize()\n      }, 50)\n    }\n  }, false)\n  if (doc.readyState === 'complete') {\n    setTimeout(function () {\n      that.chart.resize()\n    }, 50)\n  } else {\n    doc.addEventListener('DOMContentLoaded', function (e) {\n      setTimeout(function () {\n        that.chart.resize()\n      }, 50)\n    }, false)\n  }\n}\n\nmodule.exports = ol3Echarts\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/echartsLayer.js"],"sourceRoot":""}