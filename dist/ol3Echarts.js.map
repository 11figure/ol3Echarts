{"version":3,"file":"ol3Echarts.js","sources":["../src/helper.js","../src/coordinate/formatGeoJSON.js","../src/coordinate/RegisterCoordinateSystem.js","../src/charts/pie.js","../src/charts/bar.js","../src/index.js"],"sourcesContent":["/**\n * Created by FDD on 2017/11/28.\n * @desc helper\n */\n\n/**\n * 判断是否为对象\n * @param value\n * @returns {boolean}\n */\nconst isObject = value => {\n  const type = typeof value;\n  return value !== null && (type === 'object' || type === 'function');\n};\n\n/**\n * merge\n * @param a\n * @param b\n * @returns {*}\n */\nconst merge = (a, b) => {\n  for (const key in b) {\n    if (isObject(b[key]) && isObject(a[key])) {\n      merge(a[key], b[key]);\n    } else {\n      a[key] = b[key];\n    }\n  }\n  return a\n};\n\n/**\n * get parent container\n * @param selector\n */\nconst getTarget = (selector) => {\n  let dom = (function () {\n    let found;\n    return (document && /^#([\\w-]+)$/.test(selector))\n      ? ((found = document.getElementById(RegExp.$1)) ? [found] : [])\n      : Array.prototype.slice.call(/^\\.([\\w-]+)$/.test(selector)\n        ? document.getElementsByClassName(RegExp.$1)\n        : /^[\\w-]+$/.test(selector) ? document.getElementsByTagName(selector)\n          : document.querySelectorAll(selector)\n      )\n  })();\n  return dom\n};\n\n/**\n * 数组映射\n * @param {Array} obj\n * @param {Function} cb\n * @param {*} [context]\n * @return {Array}\n */\nconst map = function (obj, cb, context) {\n  if (!(obj && cb)) {\n    return;\n  }\n  if (obj.map && obj.map === Array.prototype.map) {\n    return obj.map(cb, context);\n  } else {\n    let result = [];\n    for (let i = 0, len = obj.length; i < len; i++) {\n      result.push(cb.call(context, obj[i], i, obj));\n    }\n    return result;\n  }\n};\n\nconst bind = function (func, context) {\n  let args = Array.prototype.slice.call(arguments, 2);\n  return function () {\n    return func.apply(context, args.concat(Array.prototype.slice.call(arguments)));\n  }\n};\n\nexport {\n  getTarget,\n  merge,\n  isObject,\n  map,\n  bind\n}\n","/**\n * form https://github.com/ecomfe/echarts/blob/master/src/coord/geo/parseGeoJson.js\n */\nimport echarts from 'echarts';\n/**\n * check is decoded\n * @param json\n * @returns {boolean}\n */\nconst checkDecoded = json => {\n  if (json.UTF8Encoding) {\n    return false;\n  } else {\n    return true;\n  }\n};\n\n/**\n * decode json\n * @param json\n * @returns {*}\n */\nconst decode = (json) => {\n  if (checkDecoded(json)) {\n    return json;\n  }\n  let encodeScale = json.UTF8Scale;\n  if (encodeScale == null) {\n    encodeScale = 1024;\n  }\n  const features = json.features;\n  for (let f = 0; f < features.length; f++) {\n    let feature = features[f];\n    let geometry = feature.geometry;\n    let [coordinates, encodeOffsets] = [geometry.coordinates, geometry.encodeOffsets];\n    for (let c = 0; c < coordinates.length; c++) {\n      let coordinate = coordinates[c];\n      if (geometry.type === 'Polygon') {\n        coordinates[c] = decodePolygon(\n          coordinate,\n          encodeOffsets[c],\n          encodeScale\n        )\n      } else if (geometry.type === 'MultiPolygon') {\n        for (let c2 = 0; c2 < coordinate.length; c2++) {\n          let polygon = coordinate[c2];\n          coordinate[c2] = decodePolygon(\n            polygon,\n            encodeOffsets[c][c2],\n            encodeScale\n          )\n        }\n      }\n    }\n  }\n  // Has been decoded\n  json.UTF8Encoding = false;\n  return json;\n}\n\n/**\n * decode polygon\n * @param coordinate\n * @param encodeOffsets\n * @param encodeScale\n * @returns {null}\n */\nconst decodePolygon = (coordinate, encodeOffsets, encodeScale) => {\n  let [result, prevX, prevY] = [[], encodeOffsets[0], encodeOffsets[1]];\n  for (let i = 0; i < coordinate.length; i += 2) {\n    let x = coordinate.charCodeAt(i) - 64;\n    let y = coordinate.charCodeAt(i + 1) - 64;\n    // ZigZag decoding\n    x = (x >> 1) ^ (-(x & 1));\n    y = (y >> 1) ^ (-(y & 1));\n    // Delta deocding\n    x += prevX;\n    y += prevY;\n    prevX = x;\n    prevY = y;\n    // Dequantize\n    result.push([x / encodeScale, y / encodeScale]);\n  }\n  return result;\n};\n\n/**\n * decode geoJson\n * @param json\n */\nexport default function (json) {\n  const geoJson = decode(json);\n  const _features = echarts.util.map(echarts.util.filter(geoJson.features, function (featureObj) {\n    // Output of mapshaper may have geometry null\n    return featureObj.geometry &&\n      featureObj.properties &&\n      featureObj.geometry.coordinates.length > 0\n  }), function (featureObj) {\n    let properties = featureObj.properties;\n    let geo = featureObj.geometry;\n    let coordinates = geo.coordinates;\n    let geometries = [];\n    if (geo.type === 'Polygon') {\n      geometries.push(coordinates[0]);\n    }\n    if (geo.type === 'MultiPolygon') {\n      echarts.util.each(coordinates, function (item) {\n        if (item[0]) {\n          geometries.push(item[0]);\n        }\n      })\n    }\n    return {\n      'type': 'Feature',\n      'geometry': {\n        'type': 'Polygon',\n        'coordinates': geometries\n      },\n      'properties': properties\n    }\n  });\n  return {\n    'type': 'FeatureCollection',\n    'crs': {},\n    'features': _features\n  }\n}\n","/**\n * Created by FDD on 2017/5/30.\n * @desc 坐标系统\n */\n\nimport echarts from 'echarts';\nimport ol from 'openlayers';\nimport { map as $map, bind } from '../helper';\n\nconst _getCoordinateSystem = function (map, options = {}) {\n  const RegisterCoordinateSystem = function () {\n    this._mapOffset = [0, 0];\n    this.dimensions = ['lng', 'lat'];\n    this.projCode_ = this._getProjectionCode();\n  };\n\n  RegisterCoordinateSystem.prototype.dimensions = ['lng', 'lat'];\n\n  RegisterCoordinateSystem.dimensions = RegisterCoordinateSystem.prototype.dimensions;\n\n  /**\n   * get zoom\n   * @returns {number}\n   */\n  RegisterCoordinateSystem.prototype.getZoom = function () {\n    return map.getView().getZoom();\n  };\n\n  /**\n   * set zoom\n   * @param zoom\n   */\n  RegisterCoordinateSystem.prototype.setZoom = function (zoom) {\n    return map.getView().setZoom(zoom);\n  };\n\n  RegisterCoordinateSystem.prototype.getViewRectAfterRoam = function () {\n    return this.getViewRect().clone();\n  };\n\n  /**\n   * 设置地图窗口的偏移\n   * @param mapOffset\n   */\n  RegisterCoordinateSystem.prototype.setMapOffset = function (mapOffset) {\n    this._mapOffset = mapOffset;\n  };\n\n  /**\n   * 跟据坐标转换成屏幕像素\n   * @param coords\n   * @returns {ol.Pixel}\n   */\n  RegisterCoordinateSystem.prototype.dataToPoint = function (coords) {\n    if (coords && Array.isArray(coords) && coords.length > 0) {\n      coords = coords.map(function (item) {\n        if (typeof item === 'string') {\n          item = Number(item);\n        }\n        return item;\n      })\n    }\n    let source = options['source'] || 'EPSG:4326';\n    let destination = options['destination'] || this.projCode_;\n    let pixel = map.getPixelFromCoordinate(ol.proj.transform(coords, source, destination));\n    const mapOffset = this._mapOffset;\n    return [pixel[0] - mapOffset[0], pixel[1] - mapOffset[1]];\n  };\n\n  /**\n   * 获取地图视图投影\n   * @returns {string}\n   * @private\n   */\n  RegisterCoordinateSystem.prototype._getProjectionCode = function () {\n    let code = '';\n    if (map) {\n      code = map.getView() && map.getView().getProjection().getCode();\n    } else {\n      code = 'EPSG:3857';\n    }\n    return code;\n  };\n\n  /**\n   * 跟据屏幕像素转换成坐标\n   * @param pixel\n   * @returns {ol.Coordinate}\n   */\n  RegisterCoordinateSystem.prototype.pointToData = function (pixel) {\n    const mapOffset = this._mapOffset;\n    return map.getCoordinateFromPixel([pixel[0] + mapOffset[0], pixel[1] + mapOffset[1]]);\n  };\n\n  /**\n   * 获取视图矩形范围\n   * @returns {*}\n   */\n  RegisterCoordinateSystem.prototype.getViewRect = function () {\n    const size = map.getSize();\n    return new echarts.graphic.BoundingRect(0, 0, size[0], size[1]);\n  };\n\n  /**\n   * 移动转换\n   */\n  RegisterCoordinateSystem.prototype.getRoamTransform = function () {\n    return echarts.matrix.create();\n  };\n\n  /**\n   * 处理自定义图表类型\n   * @param data\n   * @returns {{coordSys: {type: string, x, y, width, height}, api: {coord, size}}}\n   */\n  RegisterCoordinateSystem.prototype.prepareCustoms = function (data) {\n    const rect = this.getViewRect();\n    return {\n      coordSys: {\n        // The name exposed to user is always 'cartesian2d' but not 'grid'.\n        type: 'openlayers',\n        x: rect.x,\n        y: rect.y,\n        width: rect.width,\n        height: rect.height\n      },\n      api: {\n        coord: bind(this.dataToPoint, this),\n        size: bind(RegisterCoordinateSystem.dataToCoordSize, this)\n      }\n    }\n  };\n\n  /**\n   * math coord size\n   * @param dataSize\n   * @param dataItem\n   */\n  RegisterCoordinateSystem.dataToCoordSize = function (dataSize, dataItem) {\n    dataItem = dataItem || [0, 0];\n    return $map([0, 1], function (dimIdx) {\n      let val = dataItem[dimIdx];\n      let halfSize = dataSize[dimIdx] / 2;\n      let [p1, p2] = [[], []];\n      p1[dimIdx] = val - halfSize;\n      p2[dimIdx] = val + halfSize;\n      p1[1 - dimIdx] = p2[1 - dimIdx] = dataItem[1 - dimIdx];\n      return Math.abs(this.dataToPoint(p1)[dimIdx] - this.dataToPoint(p2)[dimIdx]);\n    }, this)\n  };\n\n  /**\n   * 注册实例\n   * @param echartModel\n   */\n  RegisterCoordinateSystem.create = function (echartModel, api) {\n    echartModel.eachSeries(function (seriesModel) {\n      if (seriesModel.get('coordinateSystem') === 'openlayers') {\n        seriesModel.coordinateSystem = new RegisterCoordinateSystem(map);\n      }\n    })\n  };\n\n  return RegisterCoordinateSystem;\n};\n\nexport default _getCoordinateSystem;\n","const pie = function (options, serie, coordinateSystem) {\n  serie.center = coordinateSystem.dataToPoint(serie.coordinates);\n  return serie;\n};\n\nexport default pie;\n","import { isObject } from '../helper';\n\nconst bar = function (options, serie, coordinateSystem) {\n  if (isObject(options.grid) && !Array.isArray(options.grid)) {\n    console.log(options);\n  } else if (Array.isArray(options.grid)) {\n    options.grid = options.grid.map(function (gri, index) {\n      let coorPixel = coordinateSystem.dataToPoint(options.series[index].coordinates);\n      gri.left = coorPixel[0] - parseFloat(gri.width) / 2;\n      gri.top = coorPixel[1] - parseFloat(gri.height) / 2;\n      return gri\n    })\n  }\n  return serie;\n};\n\nexport default bar;\n","import ol from 'openlayers';\nimport echarts from 'echarts';\nimport { getTarget, merge, isObject, map, bind } from './helper';\nimport formatGeoJSON from './coordinate/formatGeoJSON';\nimport _getCoordinateSystem from './coordinate/RegisterCoordinateSystem';\nimport * as charts from './charts/index';\nconst _options = {\n  forcedRerender: false, // Force re-rendering\n  forcedPrecomposeRerender: false, // force pre re-render\n  hideOnZooming: false, // when zooming hide chart\n  hideOnMoving: false, // when moving hide chart\n  hideOnRotating: false, // // when Rotating hide chart\n  convertTypes: ['pie', 'line', 'bar']\n};\n\nclass ol3Echarts extends ol.Object {\n  static getTarget = getTarget;\n  static merge = merge;\n  static map = map;\n  static bind = bind;\n  static formatGeoJSON = formatGeoJSON;\n  constructor (chartOptions, options = {}, map) {\n    super();\n    /**\n     * layer options\n     * @type {{}}\n     */\n    this.$options = merge(_options, options);\n\n    /**\n     * chart options\n     */\n    this.$chartOptions = chartOptions;\n\n    /**\n     * chart instance\n     * @type {null}\n     */\n    this.$chart = null;\n\n    /**\n     * map\n     * @type {null}\n     */\n    this.$Map = null;\n\n    /**\n     * Whether the relevant configuration has been registered\n     * @type {boolean}\n     * @private\n     */\n    this._isRegistered = false;\n\n    /**\n     * 增量数据存放\n     * @type {Array}\n     * @private\n     */\n    this._incremental = [];\n\n    /**\n     * coordinate system\n     * @type {null}\n     * @private\n     */\n    this._coordinateSystem = null;\n\n    if (map) this.appendTo(map);\n  }\n\n  /**\n   * append layer to map\n   * @param map\n   */\n  appendTo (map) {\n    if (map && map instanceof ol.Map) {\n      this.$Map = map;\n      this.$Map.once('postrender', this.render, this);\n      this.$Map.renderSync();\n      this._unRegisterEvents();\n      this._registerEvents();\n    } else {\n      throw new Error('not map object');\n    }\n  }\n\n  /**\n   * get echarts options\n   * @returns {*}\n   */\n  getChartOptions () {\n    return this.$chartOptions;\n  }\n\n  /**\n   * set echarts options and reRender\n   * @param options\n   * @returns {ol3Echarts}\n   */\n  setChartOptions (options = {}) {\n    this.$chartOptions = options;\n    this.$Map.once('postrender', this.render, this);\n    this.$Map.renderSync();\n    return this;\n  }\n\n  /**\n   * append data\n   * @param data\n   * @param save\n   * @returns {ol3Echarts}\n   */\n  appendData (data, save = true) {\n    if (data) {\n      if (save) {\n        this._incremental.push({\n          data: data.data,\n          seriesIndex: data.seriesIndex\n        });\n      }\n      // https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/copyWithin\n      this.$chart.appendData({\n        data: data.data.copyWithin(),\n        seriesIndex: data.seriesIndex\n      });\n    }\n    return this;\n  }\n\n  /**\n   * get map\n   * @returns {null}\n   */\n  getMap () {\n    return this.$Map;\n  }\n\n  /**\n   * is visible\n   * @returns {Element|*|boolean}\n   * @private\n   */\n  _isVisible () {\n    return this.$container && this.$container.style.display === '';\n  }\n\n  /**\n   * show layer\n   */\n  show () {\n    if (this.$container) {\n      this.$container.style.display = '';\n    }\n  }\n\n  /**\n   * hide layer\n   */\n  hide () {\n    if (this.$container) {\n      this.$container.style.display = 'none';\n    }\n  }\n\n  /**\n   * remove layer\n   */\n  remove () {\n    this.$chart.clear();\n    this.$chart.dispose();\n    this._unRegisterEvents();\n    this._incremental = [];\n    delete this.$chart;\n    delete this.$Map;\n    this.$container.parentNode.removeChild(this.$container);\n  }\n\n  /**\n   * clear chart\n   */\n  clear () {\n    this.$chart.clear();\n  }\n\n  /**\n   * show loading bar\n   */\n  showLoading () {\n    if (this.$chart) {\n      this.$chart.showLoading();\n    }\n  }\n\n  /**\n   * hide loading bar\n   */\n  hideLoading () {\n    if (this.$chart) {\n      this.$chart.hideLoading();\n    }\n  }\n\n  /**\n   * creat eclayer container\n   * @param map\n   * @param options\n   * @private\n   */\n  _createLayerContainer (map, options) {\n    const container = this.$container = document.createElement('div');\n    container.style.position = 'absolute';\n    container.style.top = '0px';\n    container.style.left = '0px';\n    container.style.right = '0px';\n    container.style.bottom = '0px';\n    let _target = getTarget(options['target']);\n    if (_target && _target[0] && _target[0] instanceof Element) {\n      _target[0].appendChild(container);\n    } else {\n      let _target = getTarget('.ol-overlaycontainer');\n      if (_target && _target[0] && _target[0] instanceof Element) {\n        _target[0].appendChild(container);\n      } else {\n        map.getViewport().appendChild(container);\n      }\n    }\n  }\n\n  /**\n   * Reset the container size\n   * @private\n   */\n  _resizeContainer () {\n    const size = this.getMap().getSize();\n    this.$container.style.height = size[1] + 'px';\n    this.$container.style.width = size[0] + 'px';\n  }\n\n  /**\n   * clear chart and redraw\n   * @private\n   */\n  _clearAndRedraw () {\n    if (!this.$chart || (this.$container && this.$container.style.display === 'none')) {\n      return;\n    }\n    this.dispatchEvent({\n      type: 'redraw',\n      source: this\n    });\n    if (this.$options.forcedRerender) {\n      this.$chart.clear();\n    }\n    this.$chart.resize();\n    if (this.$chartOptions) {\n      this._registerMap();\n      this.$chart.setOption(this.reConverData(this.$chartOptions), false);\n      if (this._incremental && this._incremental.length > 0) {\n        for (let i = 0; i < this._incremental.length; i++) {\n          this.appendData(this._incremental[i], false)\n        }\n      }\n    }\n  }\n\n  /**\n   * handle map resize\n   */\n  onResize () {\n    this._resizeContainer();\n    this._clearAndRedraw();\n    this.dispatchEvent({\n      type: 'change:size',\n      source: this\n    });\n  }\n\n  /**\n   * handle zoom end events\n   */\n  onZoomEnd () {\n    this.$options['hideOnZooming'] && this.show();\n    this._clearAndRedraw();\n    this.dispatchEvent({\n      type: 'zoomend',\n      source: this\n    });\n  }\n\n  /**\n   * handle rotate end events\n   */\n  onDragRotateEnd () {\n    this.$options['hideOnRotating'] && this.show();\n    this._clearAndRedraw();\n    this.dispatchEvent({\n      type: 'change:rotation',\n      source: this\n    });\n  }\n\n  /**\n   * handle move start events\n   */\n  onMoveStart () {\n    this.$options['hideOnMoving'] && this.hide();\n    this.dispatchEvent({\n      type: 'movestart',\n      source: this\n    });\n  }\n\n  /**\n   * handle move end events\n   */\n  onMoveEnd () {\n    this.$options['hideOnMoving'] && this.show();\n    this._clearAndRedraw();\n    this.dispatchEvent({\n      type: 'moveend',\n      source: this\n    });\n  }\n\n  /**\n   * handle center change\n   * @param event\n   */\n  onCenterChange (event) {\n    this._clearAndRedraw();\n    this.dispatchEvent({\n      type: 'change:center',\n      source: this\n    });\n  }\n\n  /**\n   * register events\n   * @private\n   */\n  _registerEvents () {\n    const Map = this.$Map;\n    const view = Map.getView();\n    if (this.$options.forcedPrecomposeRerender) {\n      Map.on('precompose', this.reRender, this);\n    }\n    Map.on('change:size', this.onResize, this);\n    view.on('change:resolution', this.onZoomEnd, this);\n    view.on('change:center', this.onCenterChange, this);\n    view.on('change:rotation', this.onDragRotateEnd, this);\n    Map.on('movestart', this.onMoveStart, this);\n    Map.on('moveend', this.onMoveEnd, this);\n  }\n\n  /**\n   * un register events\n   * @private\n   */\n  _unRegisterEvents () {\n    const Map = this.$Map;\n    const view = Map.getView();\n    Map.un('change:size', this.onResize, this);\n    if (this.$options.forcedPrecomposeRerender) {\n      Map.un('precompose', this.reRender, this);\n    }\n    view.un('change:resolution', this.onZoomEnd, this);\n    view.un('change:center', this.onCenterChange, this);\n    view.un('change:rotation', this.onDragRotateEnd, this);\n    Map.un('movestart', this.onMoveStart, this);\n    Map.un('moveend', this.onMoveEnd, this);\n  }\n\n  /**\n   * register map coordinate system\n   * @private\n   */\n  _registerMap () {\n    if (!this._isRegistered) {\n      echarts.registerCoordinateSystem('openlayers', _getCoordinateSystem(this.getMap(), this.$options));\n      this._isRegistered = true;\n    }\n    const series = this.$chartOptions.series;\n    if (series && isObject(series)) {\n      for (let i = series.length - 1; i >= 0; i--) {\n        if (!(this.$options.convertTypes.indexOf(series[i]['type']) > -1)) {\n          series[i]['coordinateSystem'] = 'openlayers';\n        }\n        series[i]['animation'] = false;\n      }\n    }\n  }\n\n  /**\n   * 重新处理数据\n   * @param options\n   * @returns {*}\n   */\n  reConverData (options) {\n    let series = options['series'];\n    if (series && series.length > 0) {\n      if (!this._coordinateSystem) {\n        let _cs = _getCoordinateSystem(this.getMap(), this.$options);\n        this._coordinateSystem = new _cs();\n      }\n      if (series && isObject(series)) {\n        for (let i = series.length - 1; i >= 0; i--) {\n          if (this.$options.convertTypes.indexOf(series[i]['type']) > -1) {\n            if (series[i] && series[i].hasOwnProperty('coordinates')) {\n              series[i] = charts[series[i]['type']](options, series[i], this._coordinateSystem);\n            }\n          }\n        }\n      }\n    }\n    return options;\n  }\n\n  /**\n   * render\n   */\n  render () {\n    if (!this.$container) {\n      this._createLayerContainer(this.$Map, this.$options);\n      this._resizeContainer();\n    }\n    if (!this.$chart) {\n      this.$chart = echarts.init(this.$container);\n      if (this.$chartOptions) {\n        this._registerMap();\n        this.$chart.setOption(this.reConverData(this.$chartOptions), false);\n      }\n    } else if (this._isVisible()) {\n      this.$chart.resize();\n      this.reRender();\n    }\n  }\n\n  /**\n   * re-render\n   */\n  reRender () {\n    this._clearAndRedraw();\n  }\n}\n\nexport default ol3Echarts\n"],"names":["isObject","type","value","merge","a","b","key","getTarget","selector","dom","found","document","test","getElementById","RegExp","$1","Array","prototype","slice","call","getElementsByClassName","getElementsByTagName","querySelectorAll","map","obj","cb","context","result","i","len","length","push","bind","func","args","arguments","apply","concat","checkDecoded","json","UTF8Encoding","decode","encodeScale","UTF8Scale","features","f","feature","geometry","coordinates","encodeOffsets","c","coordinate","decodePolygon","c2","polygon","prevX","prevY","x","charCodeAt","y","geoJson","_features","echarts","util","filter","featureObj","properties","geo","geometries","each","item","_getCoordinateSystem","options","RegisterCoordinateSystem","_mapOffset","dimensions","projCode_","_getProjectionCode","getZoom","getView","setZoom","zoom","getViewRectAfterRoam","getViewRect","clone","setMapOffset","mapOffset","dataToPoint","coords","isArray","Number","source","destination","pixel","getPixelFromCoordinate","ol","proj","transform","code","getProjection","getCode","pointToData","getCoordinateFromPixel","size","getSize","graphic","BoundingRect","getRoamTransform","matrix","create","prepareCustoms","data","rect","width","height","dataToCoordSize","dataSize","dataItem","$map","dimIdx","val","halfSize","p1","p2","Math","abs","echartModel","api","eachSeries","seriesModel","get","coordinateSystem","pie","serie","center","bar","grid","log","gri","index","coorPixel","series","left","parseFloat","top","_options","ol3Echarts","chartOptions","$options","$chartOptions","$chart","$Map","_isRegistered","_incremental","_coordinateSystem","appendTo","Map","once","render","renderSync","_unRegisterEvents","_registerEvents","Error","getChartOptions","setChartOptions","appendData","save","seriesIndex","copyWithin","getMap","_isVisible","$container","style","display","show","hide","remove","clear","dispose","parentNode","removeChild","showLoading","hideLoading","_createLayerContainer","container","createElement","position","right","bottom","_target","Element","appendChild","getViewport","_resizeContainer","_clearAndRedraw","dispatchEvent","forcedRerender","resize","_registerMap","setOption","reConverData","onResize","onZoomEnd","onDragRotateEnd","onMoveStart","onMoveEnd","onCenterChange","event","view","forcedPrecomposeRerender","on","reRender","un","registerCoordinateSystem","convertTypes","indexOf","_cs","hasOwnProperty","charts","init","Object","formatGeoJSON"],"mappings":"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"}